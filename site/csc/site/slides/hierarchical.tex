\section{Hierarchical Graphs}

\newcommand{\we}[4]{
\begin{scope}%[xshift=#1mm,yshift=#2mm]
\foreach \n/\x/\y in {aaa/0/3, cae/1/3, aec/3/3, eee/4/3}
  \node[inputvertex] (\n) at (\x,\y) {\tt \large \n};
%  
\foreach \n/\x/\y in {aa/0/2, ca/1/2, ae/2/2, ec/3/2, ee/4/2, a/1/1, c/2/1, e/3/1}
  \node[vertex] (\n) at (\x,\y) {\tt \large \n};
%
\node[vertex] (eps) at (2,0) {\large $\varepsilon$};
%
\foreach \f/\t/\a in {eps/e/10, e/eps/10, eps/c/10, c/eps/10, eps/a/10, a/eps/10, a/aa/10, aa/a/10, aa/aaa/10, aaa/aa/10, c/ca/0, ca/cae/0, cae/ae/0, ae/aec/0, aec/ec/0, ee/eee/10, eee/ee/10, e/ee/10, ee/e/10, ca/a/0, a/ae/0, ae/e/0, e/ec/0, ec/c/0}
  \path (\f) edge[hgedge,bend left=\a,line width=2pt] (\t);
  
\node[text width=110mm,below,align=center] at (2,-0.2) {\strut \large #3\\};

#4
\end{scope}
}

\begin{frame}[label=hg]{Hierarchical Graphs}
\begin{mypic}
\begin{scope}[scale=1.5]
\only<1>{
\we{0}{0}{hierarchical graph}{}
}

\only<2>{
\we{57}{0}{any path spells a~string: {\tt aeca}}{
\foreach \f/\t/\a in {eps/a/10, a/ae/0, ae/aec/0, aec/ec/0, ec/c/0, c/ca/0, ca/a/0, a/eps/10}
  \path (\f) edge[highhgedge,bend left=\a,line width=2.5pt] (\t);
}
}

\only<3>{
\we{114}{0}{shortest $\varepsilon\to\varepsilon$ walk passing through all gray nodes: {\tt aaaecaeee}}{
\foreach \f/\t/\a in {eps/a/10, a/aa/10, aa/aaa/10, aaa/aa/10, aa/a/10, a/ae/0, ae/aec/0, aec/ec/0, ec/c/0, c/ca/0, ca/cae/0, cae/ae/0, ae/e/0, e/ee/10, ee/eee/10, eee/ee/10, ee/e/10, e/eps/10}
  \path (\f) edge[highhgedge,bend left=\a,line width=2.5pt] (\t);
}
}
\end{scope}
\end{mypic}
\end{frame}

\begin{frame}[label=most]{Collapsing a pair of arcs}
\begin{mypic}
\begin{scope}[scale=1.5]
\node[vertex] (a) at (0, 1.5) {\tt \large aez};
\node[vertex] (b) at (1.5, 2.5) {\tt \large aezc};
\node[vertex] (c) at (3, 1.5) {\tt \large ezc};
\node[vertex] (d) at (1.5, 0.5) {\tt \large ez};
\path<1> (a) edge[->,highhgedge,line width=2.5pt]  (b);
\path<1> (b) edge[->,highhgedge,line width=2.5pt]  (c);
\path<2> (a) edge[->,highhgedge,line width=2.5pt] node[left,inner sep=3mm] {$+{\tt c}$} (b);
\path<2> (b) edge[->,highhgedge,line width=2.5pt] node[right,inner sep=3mm] {$-{\tt a}$} (c);
\path<3> (a) edge[->,highhgedge,line width=2.5pt] node[left,inner sep=3mm] {$-{\tt a}$} (d);
\path<3> (d) edge[->,highhgedge,line width=2.5pt] node[right,inner sep=3mm] {$+{\tt c}$} (c);

%\draw<2>[highhgedge,line width=2.5pt] (a) -- (d);
%\draw<2>[highhgedge,line width=2.5pt] (d) -- (c);
\end{scope}
\end{mypic}
\end{frame}


